define(["common"],function(e){if(!e.legacyCheck()&&0!=document.getElementsByClassName("event-form").length){var a=document.getElementsByTagName("html"),t=document.getElementsByName("email"),n=document.getElementsByName("email-confirm"),c=1;e.set(t[0],"valid",!1),e.set(n[0],"valid",!1);var i=function(){r(1),t[0].oninput=function(a){e.set(t[0],"valid",!1),e.set(n[0],"valid",!1),1===c&&d("email",a.target.value)&&(e.set(t[0],"valid",!0),e.set(n[0],"valid",!0))},n[0].onclick=function(){1===c&&d("email",t[0].value)&&(r(2),s())}},r=function(t){c=t,e.setClass(a[0],"viewing-"+c)},s=function(){alert("Email address would be submitted and saved")},d=function(e,a){switch(e){case"email":return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a);case"postcode":return/[A-Z]{1,2}[0-9][0-9A-Z]?\s?[0-9][A-Z]{2}/gi.test(a);case"donate":return d("card-number",cardData[0].value)&&d("card-expiration-month",cardData[1].value)&&d("card-expiration-year",cardData[2].value)&&d("card-cvv",cardData[3].value);case"card-number":case"card-expiration-month":case"card-expiration-year":case"card-cvv":return a.length>0}};return{watch:i}}});