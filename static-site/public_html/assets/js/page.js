define(["common","carousel"],function(e){function s(e,s,t){var n="";if(t){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3),n="; expires="+a.toUTCString()}document.cookie=e+"="+s+n+"; path=/"}function t(e){for(var s=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var a=t[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(s))return a.substring(s.length,a.length)}return null}if(!e.legacyCheck()){var n=document.getElementsByTagName("html"),a=document.getElementsByTagName("body"),l=document.getElementsByClassName("wrapper"),c=document.getElementsByTagName("section"),o=1,i=function(){var s=" browser-"+e.theBrowser();s+=e.isTouch()?" is-touch":" is-desktop",e.setClass(a[0],s,!0)},m=function(){settings.animate&&setInterval(function(){for(var s=0;s<c.length;s++){var t=c[s].getBoundingClientRect(),a=l[0].getBoundingClientRect();t.top<0&&Math.abs(t.top)<t.height&&(o=s+1),t.top>=0&&t.top<=a.height/2&&(o=s+1)}e.setClass(n[0],"viewing-"+o)},200)},r=function(){var e=document.getElementsByClassName("toggle-navigation")[0],s=document.getElementsByTagName("nav")[0],t=s.getElementsByTagName("ul")[0],n=s.getElementsByTagName("a"),a=t.className;e.addEventListener("click",function(e){e.preventDefault(),s.className=-1==s.className.indexOf("active")?"active":""}),window.onkeydown=function(e){27==e.keyCode&&s.className.indexOf("active")>-1&&(s.className="")};for(var l=0;l<n.length;l++)n[l].onmouseover=function(){t.className=a+" hovered"},n[l].onmouseout=function(){t.className=a}},g=function(){if(settings.showHint){var e=document.createElement("span");e.className="hint",e.innerHTML="Learn more",l[0].appendChild(e),setTimeout(function(){e.className="hint ready"},100),setInterval(function(){l[0].scrollTop>=l[0].getBoundingClientRect().height/2&&-1==e.className.indexOf("expired")&&(e.className="hint expired")},200)}},u=function(){for(var e=document.getElementsByClassName("anchor"),s=0;s<e.length;s++)e[s].addEventListener("click",function(e){e.preventDefault();var s=document.getElementById(e.target.getAttribute("href").replace("#",""));l[0].scrollTop=s.getBoundingClientRect().top+l[0].scrollTop})},p={watch:function(){var s=document.getElementsByClassName("carousel")[0],t=s.className,n=document.getElementsByClassName("carousel__navigation")[0].getElementsByTagName("li");s.className=t+" step-1";for(var a=0;a<n.length;a++)!function(){n[a].onmouseover=function(){s.className=t+" step-"+e.get(this,"position")},n[a].onmouseout=function(){s.className=t+" step-1"}}(a)},position:function(){for(var e=document.getElementsByClassName("carousel__navigation")[0],s=document.getElementsByClassName("carousel__items")[0].getElementsByTagName("li"),t=0,n=0;n<s.length;n++)!function(){var e=s[n].getElementsByTagName("div")[0];e.getBoundingClientRect().height>t&&(t=e.getBoundingClientRect().height)}(n);e.style.marginTop=t/2+e.getBoundingClientRect().height+"px"}},h=function(){function n(){for(var e=0,s=0;65>s;s++){var t=new Image;t.onload=function(){e++,e>=65&&c()},t.src="assets/img/splash/"+s+".png"}}function c(){setTimeout(function(){m||(r.className=r.className.replace(/\bsplash-screen--step-1\b/,""))},2e3),setTimeout(function(){if(!m){e.setClass(r," splash-screen--step-2",!0);var s=1,t=setInterval(function(){g.className="logo step-"+s,75>s?s++:(clearInterval(t),r.className=r.className.replace(/\bsplash-screen--step-2\b/,""),setTimeout(function(){a[0].className=a[0].className.replace(/\bviewing-splash-screen\b/,"")},1e3))},100)}},3e3),r.addEventListener("click",function(){m=!0,r.className=r.className.replace(/\bsplash-screen--step-1\b/,""),r.className=r.className.replace(/\bsplash-screen--step-2\b/,""),setTimeout(function(){a[0].className=a[0].className.replace(/\bviewing-splash-screen\b/,"")},1e3)})}var o=!1,i=t("validity-seen-splash-screen");if(i&&(o=!0),s("validity-seen-splash-screen","yes",7),0==o){var m=!1,r=document.getElementsByClassName("splash-screen")[0],g=document.getElementsByClassName("logo")[0];l[0].scrollTop=0,e.setClass(a[0]," viewing-splash-screen",!0),n()}else{var r=document.getElementsByClassName("splash-screen")[0],g=document.getElementsByClassName("logo")[0];r.className=r.className.replace(/\bsplash-screen--step-1\b/,""),r.className=r.className.replace(/\bsplash-screen--step-2\b/,""),a[0].className=a[0].className.replace(/\bviewing-splash-screen\b/,"")}};return{init:i,watch:m,primaryNavigation:r,hint:g,anchor:u,carousel:p,splash:h}}});